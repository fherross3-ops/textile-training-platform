<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plataforma de Capacitación Textil</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --text-color: #333;
            --border-radius: 6px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #f5f7fa;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        h1, h2, h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        h1 {
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--secondary-color);
            margin-bottom: 30px;
        }
        
        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            background-color: #f9f9f9;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 16px;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        button {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        .btn-primary {
            background-color: var(--secondary-color);
            display: block;
            width: 100%;
            margin-top: 20px;
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
        }
        
        .btn-secondary {
            background-color: var(--primary-color);
        }
        
        .btn-secondary:hover {
            background-color: #1a252f;
        }
        
        .btn-success {
            background-color: var(--success-color);
        }
        
        .btn-success:hover {
            background-color: #25a25a;
        }
        
        .btn-warning {
            background-color: var(--warning-color);
        }
        
        .btn-warning:hover {
            background-color: #e67e22;
        }
        
        .btn-danger {
            background-color: var(--accent-color);
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .required::after {
            content: " *";
            color: var(--accent-color);
        }
        
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-col {
            flex: 1;
        }
        
        .alert {
            padding: 10px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            display: none;
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .process-selector {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .process-item {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .process-item:hover {
            background-color: #e3f2fd;
        }
        
        .process-item.selected {
            background-color: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .radio-option input[type="radio"] {
            width: auto;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .action-buttons button {
            flex: 1;
            min-width: 150px;
        }
        
        .repository-section {
            margin-top: 40px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            background-color: #f9f9f9;
        }
        
        .kpi-list {
            margin-top: 20px;
        }
        
        .kpi-item {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            margin-bottom: 10px;
            background-color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .kpi-info {
            flex: 1;
        }
        
        .kpi-actions {
            display: flex;
            gap: 10px;
        }
        
        .kpi-actions button {
            padding: 8px 12px;
            font-size: 14px;
        }
        
        .hidden {
            display: none;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background-color: #f1f1f1;
            border: 1px solid #ddd;
            border-bottom: none;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            margin-right: 5px;
        }
        
        .tab.active {
            background-color: white;
            border-bottom: 1px solid white;
            margin-bottom: -1px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Estilos para la sección de recursos */
        .resources-header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 1rem;
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .back-btn {
            display: inline-block;
            margin-bottom: 1rem;
            padding: 0.5rem 1rem;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 4px;
        }
        
        .content-section {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }
        
        footer {
            text-align: center;
            margin-top: 2rem;
            padding: 1rem;
            background: #2c3e50;
            color: white;
        }
        
        /* Estilos para la sección de ejemplos */
        .example-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            background-color: #f9f9f9;
        }
        
        .example-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        .example-title {
            font-size: 1.5rem;
            color: var(--primary-color);
        }
        
        .example-process {
            background-color: var(--secondary-color);
            color: white;
            padding: 5px 10px;
            border-radius: var(--border-radius);
            font-size: 0.9rem;
        }
        
        .example-form-group {
            margin-bottom: 15px;
            padding: 10px;
            background: white;
            border-radius: var(--border-radius);
            border: 1px solid #eee;
        }
        
        .example-form-label {
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
            color: var(--primary-color);
        }
        
        .example-form-value {
            padding: 8px;
            background: #f8f9fa;
            border-radius: var(--border-radius);
            border-left: 3px solid var(--secondary-color);
        }
        
        .formula {
            font-family: monospace;
            background: #2c3e50;
            color: white;
            padding: 10px;
            border-radius: var(--border-radius);
            margin: 10px 0;
        }
        
        .example-action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        /* Estilos para impresión */
        @media print {
            body {
                background-color: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                padding: 15px;
                max-width: 100%;
            }
            
            .action-buttons, 
            .tabs,
            .repository-section,
            .btn-primary,
            .process-selector {
                display: none !important;
            }
            
            .form-section {
                border: 1px solid #ddd;
                background-color: white;
                page-break-inside: avoid;
                margin-bottom: 20px;
            }
            
            h1 {
                font-size: 24px;
                text-align: center;
                border-bottom: 2px solid #3498db;
                padding-bottom: 10px;
                margin-bottom: 20px;
            }
            
            h2 {
                font-size: 18px;
                color: #2c3e50;
                border-bottom: 1px solid #ddd;
                padding-bottom: 8px;
                margin-bottom: 15px;
            }
            
            .form-group {
                margin-bottom: 15px;
            }
            
            input, select, textarea {
                border: 1px solid #ddd;
                background-color: #f9f9f9;
                padding: 8px;
            }
            
            .radio-group {
                margin-bottom: 10px;
            }
            
            /* Mostrar valores seleccionados como texto normal */
            .process-item.selected {
                background-color: transparent;
                color: #333;
                border: 1px solid #ddd;
                font-weight: bold;
            }
            
            /* Ocultar todos los procesos no seleccionados */
            .process-item:not(.selected) {
                display: none;
            }
            
            /* Mostrar solo el proceso seleccionado */
            .process-selector {
                display: block;
                margin-bottom: 15px;
            }
            
            /* Estilo para valores de radio seleccionados */
            .radio-option input[type="radio"]:not(:checked) + label {
                display: none;
            }
            
            .radio-option input[type="radio"]:checked + label {
                display: block;
                font-weight: bold;
                margin-bottom: 10px;
            }
            
            .radio-option input[type="radio"] {
                display: none;
            }
            
            .radio-group {
                display: block;
            }
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .process-selector {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .radio-group {
                flex-direction: column;
                gap: 10px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .kpi-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .kpi-actions {
                margin-top: 10px;
                width: 100%;
                justify-content: space-between;
            }
            
            .example-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .example-process {
                margin-top: 10px;
            }
            
            .example-action-buttons {
                flex-direction: column;
            }
        }
    </style>
    <!-- Librería para exportación a PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Plataforma de Capacitación Textil</h1>
        
        <div class="tabs">
            <div class="tab active" data-tab="kpi">Diseño de KPI</div>
            <div class="tab" data-tab="examples">Ejemplos de KPI</div>
            <div class="tab" data-tab="resources">Recursos</div>
        </div>
        
        <div id="alertBox" class="alert"></div>
        
        <!-- Pestaña de KPI -->
        <div id="kpiTab" class="tab-content active">
            <!-- Formulario para Netlify (oculto) -->
            <form name="kpi-netlify-form" netlify netlify-honeypot="bot-field" hidden>
                <input type="text" name="kpiName">
                <input type="text" name="kpiDescription">
                <input type="text" name="kpiObjective">
                <input type="text" name="selectedProcess">
                <input type="text" name="variables">
                <input type="text" name="measurementUnit">
                <input type="text" name="formula">
                <input type="text" name="frequency">
                <input type="text" name="targetValue">
                <input type="text" name="minValue">
                <input type="text" name="maxValue">
                <input type="text" name="toleranceRange">
                <input type="text" name="sisgoGrafico">
                <input type="text" name="utilidadComentario">
                <input type="text" name="designResponsible">
                <input type="text" name="implementationResponsible">
                <input type="text" name="monitoringResponsible">
                <input type="text" name="emailContact">
            </form>
            
            <!-- Formulario principal (interfaz de usuario) -->
            <form id="kpiForm">
                <!-- Sección 1: Información básica del KPI -->
                <div class="form-section">
                    <h2>Información Básica del KPI</h2>
                    
                    <div class="form-group">
                        <label for="kpiName" class="required">Nombre del KPI</label>
                        <input type="text" id="kpiName" name="kpiName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="kpiDescription" class="required">Descripción del KPI</label>
                        <textarea id="kpiDescription" name="kpiDescription" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="kpiObjective" class="required">Objetivo del KPI</label>
                        <textarea id="kpiObjective" name="kpiObjective" required></textarea>
                    </div>
                </div>
                
                <!-- Sección 2: Selección de proceso -->
                <div class="form-section">
                    <h2>Selección de Proceso Textil</h2>
                    <p>Seleccione el proceso al que aplicará este KPI:</p>
                    
                    <div class="process-selector">
                        <div class="process-item" data-process="apertura_algodon">Apertura Algodón</div>
                        <div class="process-item" data-process="cardas">Cardas</div>
                        <div class="process-item" data-process="manuares">Manuares</div>
                        <div class="process-item" data-process="mecheras">Mecheras</div>
                        <div class="process-item" data-process="hilatura_anillos">Hilatura Anillos</div>
                        <div class="process-item" data-process="hilatura_openend">Hilatura Open-End</div>
                        <div class="process-item" data-process="urdido">Urdido</div>
                        <div class="process-item" data-process="tenido">Teñido</div>
                        <div class="process-item" data-process="reurdido">Reurdido</div>
                        <div class="process-item" data-process="engomado">Engomado</div>
                        <div class="process-item" data-process="tejeduria">Tejeduría</div>
                        <div class="process-item" data-process="acabado">Acabado</div>
                        <div class="process-item" data-process="revision">Revisión</div>
                        <div class="process-item" data-process="despacho">Despacho</div>
                        <div class="process-item" data-process="servicios">Servicios</div>
                        <div class="process-item" data-process="logistica">Logística</div>
                        <div class="process-item" data-process="calidad">Calidad</div>
                        <div class="process-item" data-process="Innovacion y Desarrollo">Innovacion_Desarrollo</div>
                        <div class="process-item" data-process="Administracion">Administracion</div>


                        
                    </div>
                    
                    <input type="hidden" id="selectedProcess" name="selectedProcess" required>
                </div>
                
                <!-- Sección 3: Parámetros y Fórmulas -->
                <div class="form-section">
                    <h2>Parámetros y Fórmulas</h2>
                    
                    <div class="form-group">
                        <label for="variables" class="required">Variables a Medir (separadas por coma)</label>
                        <input type="text" id="variables" name="variables" placeholder="Ej: Tiempo ciclo, Defectos, Producción" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="measurementUnit" class="required">Unidad de Medida</label>
                        <input type="text" id="measurementUnit" name="measurementUnit" placeholder="Ej: Unidades por hora, Porcentaje, Partes por millón" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="formula" class="required">Fórmula de Cálculo</label>
                        <textarea id="formula" name="formula" placeholder="Ej: (Producción real / Producción planeada) * 100" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="frequency" class="required">Frecuencia de Medición</label>
                        <select id="frequency" name="frequency" required>
                            <option value="">Seleccione una frecuencia</option>
                            <option value="continua">Continua</option>
                            <option value="horaria">Horaria</option>
                            <option value="diaria">Diaria</option>
                            <option value="semanal">Semanal</option>
                            <option value="mensual">Mensual</option>
                        </select>
                    </div>
                </div>
                
                <!-- Sección 4: Metas y Valores Esperados -->
                <div class="form-section">
                    <h2>Metas y Valores Esperados</h2>
                    
                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label for="targetValue" class="required">Valor Meta</label>
                                <input type="number" id="targetValue" name="targetValue" step="0.01" required>
                            </div>
                        </div>
                        
                        <div class="form-col">
                            <div class="form-group">
                                <label for="minValue" class="required">Valor Mínimo Aceptable</label>
                                <input type="number" id="minValue" name="minValue" step="0.01" required>
                            </div>
                        </div>
                        
                        <div class="form-col">
                            <div class="form-group">
                                <label for="maxValue">Valor Máximo Esperado</label>
                                <input type="number" id="maxValue" name="maxValue" step="0.01">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="toleranceRange">Rango de Tolerancia (±)</label>
                        <input type="number" id="toleranceRange" name="toleranceRange" step="0.01" placeholder="Porcentaje o valor absoluto">
                    </div>
                </div>
                
                <!-- Nueva Sección: Gráfico en SISGO y Utilidad -->
                <div class="form-section">
                    <h2>Información Adicional del KPI</h2>
                    
                    <div class="form-group">
                        <label class="required">¿El Indicador Clave de Desempeño (KPI) diseñado tiene Gráfico en SISGO?</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="sisgoSi" name="sisgoGrafico" value="si" required>
                                <label for="sisgoSi">Sí</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="sisgoNo" name="sisgoGrafico" value="no">
                                <label for="sisgoNo">No</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="utilidadComentario">Comentario sobre utilidad:</label>
                        <textarea id="utilidadComentario" name="utilidadComentario" placeholder="Actualmente es utilizado por Usted y le es Útil o requiere ser mejorado?"></textarea>
                    </div>
                </div>
                
                <!-- Sección 5: Responsables -->
                <div class="form-section">
                    <h2>Responsables</h2>
                    
                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label for="designResponsible" class="required">Responsable del Diseño</label>
                                <input type="text" id="designResponsible" name="designResponsible" required>
                            </div>
                        </div>
                        
                        <div class="form-col">
                            <div class="form-group">
                                <label for="implementationResponsible" class="required">Responsable de Implementación</label>
                                <input type="text" id="implementationResponsible" name="implementationResponsible" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label for="monitoringResponsible" class="required">Responsable de Monitoreo</label>
                                <input type="text" id="monitoringResponsible" name="monitoringResponsible" required>
                            </div>
                        </div>
                        
                        <div class="form-col">
                            <div class="form-group">
                                <label for="emailContact">Correo de Contacto</label>
                                <input type="email" id="emailContact" name="emailContact" placeholder="ejemplo@empresa.com">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button type="submit" class="btn-primary">Guardar KPI</button>
                    <button type="button" id="btnExportPDF" class="btn-secondary">Exportar a PDF</button>
                    <button type="button" id="btnExportWord" class="btn-success">Exportar a Word</button>
                    <button type="button" id="btnPrint" class="btn-warning">Imprimir Formulario</button>
                    <button type="button" id="btnImportCSV" class="btn-warning">Importar desde CSV</button>
                    <button type="button" id="btnExportCSV" class="btn-secondary">Exportar a CSV</button>
                    <input type="file" id="csvFileInput" accept=".csv" style="display: none;">
                </div>
            </form>
        </div>
        
        <!-- Pestaña de ejemplos de KPI -->
        <div id="examplesTab" class="tab-content">
            <h1>Ejemplos de KPI para Proceso Textil</h1>
            <p>Estos son tres ejemplos completos de formularios KPI para diferentes procesos textiles con datos simulados.</p>
            
            <!-- Ejemplo 1 -->
            <div class="example-section">
                <div class="example-header">
                    <h2 class="example-title">Eficiencia de Producción en Hilatura Open-End</h2>
                    <span class="example-process">Hilatura Open-End</span>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Descripción del KPI</div>
                    <div class="example-form-value">Mide el porcentaje de eficiencia en el proceso de hilatura open-end, considerando la producción real vs. la producción teórica posible.</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Objetivo del KPI</div>
                    <div class="example-form-value">Maximizar la eficiencia del proceso de hilatura open-end para reducir costos y aumentar la capacidad productiva.</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Variables a Medir</div>
                    <div class="example-form-value">Producción real, Producción teórica, Tiempo de operación</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Unidad de Medida</div>
                    <div class="example-form-value">Porcentaje (%)</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Fórmula de Cálculo</div>
                    <div class="formula">(Producción real / Producción teórica) * 100</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Frecuencia de Medición</div>
                    <div class="example-form-value">Diaria</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Valores Esperados</div>
                    <div class="example-form-value">
                        <strong>Valor Meta:</strong> 85%<br>
                        <strong>Valor Mínimo Aceptable:</strong> 75%<br>
                        <strong>Valor Máximo Esperado:</strong> 95%<br>
                        <strong>Rango de Tolerancia:</strong> ±5%
                    </div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Gráfico en SISGO</div>
                    <div class="example-form-value">Sí</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Comentario sobre utilidad</div>
                    <div class="example-form-value">Actualmente utilizado y es útil para identificar cuellos de botella en el proceso.</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Responsables</div>
                    <div class="example-form-value">
                        <strong>Diseño:</strong> Ing. C. M.<br>
                        <strong>Implementación:</strong> Supervisor J. P.<br>
                        <strong>Monitoreo:</strong> Jefe de Producción<br>
                        <strong>Email:</strong> produccion@Jeantex_textil_ejemplo.com
                    </div>
                </div>
                
                <div class="example-action-buttons">
                    <button class="btn-primary" onclick="useExample(1)">Usar este ejemplo</button>
                    <button class="btn-success" onclick="exportExampleToPDF(1)">Exportar a PDF</button>
                </div>
            </div>
            
            <!-- Ejemplo 2 -->
            <div class="example-section">
                <div class="example-header">
                    <h2 class="example-title">Índice de Defectos en Tejeduría</h2>
                    <span class="example-process">Tejeduría</span>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Descripción del KPI</div>
                    <div class="example-form-value">Controla la cantidad de defectos por metro cuadrado de tela producida en el área de tejeduría.</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Objetivo del KPI</div>
                    <div class="example-form-value">Reducir los defectos en la tela producida para mejorar la calidad del producto final y minimizar los rechazos.</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Variables a Medir</div>
                    <div class="example-form-value">Defectos encontrados, Metros producidos</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Unidad de Medida</div>
                    <div class="example-form-value">Defectos por m²</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Fórmula de Cálculo</div>
                    <div class="formula">Total defectos / Total metros cuadrados producidos</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Frecuencia de Medición</div>
                    <div class="example-form-value">Por turno</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Valores Esperados</div>
                    <div class="example-form-value">
                        <strong>Valor Meta:</strong> 0.5 defectos/m²<br>
                        <strong>Valor Mínimo Aceptable:</strong> 0 defectos/m²<br>
                        <strong>Valor Máximo Esperado:</strong> 1.2 defectos/m²<br>
                        <strong>Rango de Tolerancia:</strong> ±0.2 defectos/m²
                    </div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Gráfico en SISGO</div>
                    <div class="example-form-value">No</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Comentario sobre utilidad</div>
                    <div class="example-form-value">Requiere ser mejorado: necesitamos implementar gráficos de control para seguimiento en tiempo real.</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Responsables</div>
                    <div class="example-form-value">
                        <strong>Diseño:</strong> Ing. L. R.<br>
                        <strong>Implementación:</strong> Supervisor Tejeduría<br>
                        <strong>Monitoreo:</strong> Control de Calidad<br>
                        <strong>Email:</strong> calidad@Jeantex_ejemplo.com
                    </div>
                </div>
                
                <div class="example-action-buttons">
                    <button class="btn-primary" onclick="useExample(2)">Usar este ejemplo</button>
                    <button class="btn-success" onclick="exportExampleToPDF(2)">Exportar a PDF</button>
                </div>
            </div>
            
            <!-- Ejemplo 3 -->
            <div class="example-section">
                <div class="example-header">
                    <h2 class="example-title">Consumo Energético por Kg de Producto</h2>
                    <span class="example-process">Servicios</span>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Descripción del KPI</div>
                    <div class="example-form-value">Mide la eficiencia en el consumo de energía por kilogramo de producto terminado en el área de servicios.</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Objetivo del KPI</div>
                    <div class="example-form-value">Optimizar el consumo energético para reducir costos operativos y minimizar el impacto ambiental.</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Variables a Medir</div>
                    <div class="example-form-value">Energía consumida, Producción total</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Unidad de Medida</div>
                    <div class="example-form-value">kWh/kg</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Fórmula de Cálculo</div>
                    <div class="formula">Total energía consumida / Total kg producidos</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Frecuencia de Medición</div>
                    <div class="example-form-value">Mensual</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Valores Esperados</div>
                    <div class="example-form-value">
                        <strong>Valor Meta:</strong> 2.8 kWh/kg<br>
                        <strong>Valor Mínimo Aceptable:</strong> 2.5 kWh/kg<br>
                        <strong>Valor Máximo Esperado:</strong> 3.5 kWh/kg<br>
                        <strong>Rango de Tolerancia:</strong> ±0.3 kWh/kg
                    </div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Gráfico en SISGO</div>
                    <div class="example-form-value">Sí</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Comentario sobre utilidad</div>
                    <div class="example-form-value">Muy útil para identificar oportunidades de ahorro energético y establecer metas de sostenibilidad.</div>
                </div>
                
                <div class="example-form-group">
                    <div class="example-form-label">Responsables</div>
                    <div class="example-form-value">
                        <strong>Diseño:</strong> Ing. R. S.<br>
                        <strong>Implementación:</strong> Jefe de Servicios<br>
                        <strong>Monitoreo:</strong> Gerencia de Operaciones<br>
                        <strong>Email:</strong> operaciones@Jeantex_textiles_ejemplo.com
                    </div>
                </div>
                
                <div class="example-action-buttons">
                    <button class="btn-primary" onclick="useExample(3)">Usar este ejemplo</button>
                    <button class="btn-success" onclick="exportExampleToPDF(3)">Exportar a PDF</button>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn-secondary" onclick="showTab('kpi')">Volver al Formulario Principal</button>
            </div>
        </div>
        
        <!-- Pestaña de recursos -->
        <div id="resourcesTab" class="tab-content">
            <div class="resources-header">
                <h2>Recursos de Capacitación</h2>
                <p>Material de apoyo para el diseño e implementación de KPIs</p>
            </div>
            
            <div class="content-section">
                <h3>Guías y Manuales</h3>
                <ul>
                    <li>Manual de Indicadores de Gestión - Textil</li>
                    <li>Guía para diseño de KPIs en procesos textiles</li>
                    <li>Plantilla de seguimiento de indicadores</li>
                    <li>Procedimiento para implementación de KPIs</li>
                </ul>
            </div>
            
            <div class="content-section">
                <h3>Videos de Capacitación</h3>
                <ul>
                    <li>Introducción a los KPIs en la industria textil</li>
                    <li>Cómo diseñar KPIs efectivos</li>
                    <li>Interpretación de resultados y toma de decisiones</li>
                    <li>Casos de éxito en implementación de KPIs</li>
                </ul>
            </div>
            
            <div class="content-section">
                <h3>Plantillas Descargables</h3>
                <ul>
                    <li>Formulario KPI (Excel)</li>
                    <li>Dashboard de seguimiento (Power BI)</li>
                    <li>Presentación para comités directivos</li>
                    <li>Formato de reporte de resultados</li>
                </ul>
            </div>
            
            <div class="action-buttons">
                <button class="btn-secondary" onclick="showTab('kpi')">Volver al Formulario Principal</button>
            </div>
        </div>
        
        <!-- Repositorio de KPIs -->
        <div class="repository-section">
            <h2>Repositorio de KPIs Guardados</h2>
            <p>Aquí puedes ver y gestionar todos los KPIs que has creado:</p>
            
            <div class="kpi-list" id="kpiList">
                <p id="emptyRepository">No hay KPIs guardados aún. Completa el formulario y haz clic en "Guardar KPI" para agregar el primero.</p>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let kpiRepository = [];
        let selectedProcess = '';
        
        // Inicialización cuando el DOM esté cargado
        document.addEventListener('DOMContentLoaded', function() {
            // Cargar KPIs guardados del localStorage
            loadKPIsFromStorage();
            
            // Configurar eventos para los elementos de proceso
            setupProcessSelection();
            
            // Configurar eventos para los tabs
            setupTabs();
            
            // Configurar eventos para los botones de acción
            setupActionButtons();
            
            // Configurar el envío del formulario
            setupFormSubmission();
        });
        
        // Configurar la selección de procesos
        function setupProcessSelection() {
            const processItems = document.querySelectorAll('.process-item');
            
            processItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Deseleccionar todos los procesos
                    processItems.forEach(pi => pi.classList.remove('selected'));
                    
                    // Seleccionar el proceso clickeado
                    this.classList.add('selected');
                    
                    // Guardar el valor seleccionado
                    selectedProcess = this.getAttribute('data-process');
                    document.getElementById('selectedProcess').value = selectedProcess;
                });
            });
        }
        
        // Configurar los tabs
        function setupTabs() {
            const tabs = document.querySelectorAll('.tab');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    showTab(tabName);
                });
            });
        }
        
        // Mostrar una pestaña específica
        function showTab(tabName) {
            // Ocultar todos los contenidos de pestañas
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Desactivar todas las pestañas
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Activar la pestaña seleccionada
            document.getElementById(tabName + 'Tab').classList.add('active');
            document.querySelector(`.tab[data-tab="${tabName}"]`).classList.add('active');
        }
        
        // Configurar los botones de acción
        function setupActionButtons() {
            // Botón para exportar a PDF
            document.getElementById('btnExportPDF').addEventListener('click', exportToPDF);
            
            // Botón para exportar a Word
            document.getElementById('btnExportWord').addEventListener('click', exportToWord);
            
            // Botón para imprimir
            document.getElementById('btnPrint').addEventListener('click', printForm);
            
            // Botón para importar desde CSV
            document.getElementById('btnImportCSV').addEventListener('click', function() {
                document.getElementById('csvFileInput').click();
            });
            
            // Botón para exportar a CSV
            document.getElementById('btnExportCSV').addEventListener('click', exportToCSV);
            
            // Manejar la selección de archivo CSV
            document.getElementById('csvFileInput').addEventListener('change', handleCSVImport);
        }
        
        // Configurar el envío del formulario
        function setupFormSubmission() {
            document.getElementById('kpiForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveKPI();
            });
        }
        
        // Guardar un KPI
        function saveKPI() {
            // Validar formulario
            if (!validateForm()) {
                showAlert('Por favor, complete todos los campos obligatorios.', 'error');
                return;
            }
            
            // Obtener valores del formulario
            const formData = new FormData(document.getElementById('kpiForm'));
            const kpiData = {};
            
            for (let [key, value] of formData.entries()) {
                kpiData[key] = value;
            }
            
            // Agregar ID y timestamp
            kpiData.id = Date.now();
            kpiData.createdAt = new Date().toISOString();
            
            // Agregar al repositorio
            kpiRepository.push(kpiData);
            
            // Guardar en localStorage
            saveKPIsToStorage();
            
            // Actualizar la lista de KPIs
            updateKPIList();
            
            // Mostrar mensaje de éxito
            showAlert('KPI guardado correctamente.', 'success');
            
            // Limpiar formulario
            document.getElementById('kpiForm').reset();
            document.querySelectorAll('.process-item').forEach(item => {
                item.classList.remove('selected');
            });
            selectedProcess = '';
        }
        
        // Validar el formulario
        function validateForm() {
            const requiredFields = document.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    isValid = false;
                    field.style.borderColor = 'red';
                } else {
                    field.style.borderColor = '#ddd';
                }
            });
            
            // Validar que se haya seleccionado un proceso
            if (!selectedProcess) {
                isValid = false;
                showAlert('Por favor, seleccione un proceso.', 'error');
            }
            
            return isValid;
        }
        
        // Mostrar alerta
        function showAlert(message, type) {
            const alertBox = document.getElementById('alertBox');
            alertBox.textContent = message;
            alertBox.className = `alert alert-${type}`;
            alertBox.style.display = 'block';
            
            // Ocultar la alerta después de 5 segundos
            setTimeout(() => {
                alertBox.style.display = 'none';
            }, 5000);
        }
        
        // Cargar KPIs desde localStorage
        function loadKPIsFromStorage() {
            const storedKPIs = localStorage.getItem('kpiRepository');
            if (storedKPIs) {
                kpiRepository = JSON.parse(storedKPIs);
                updateKPIList();
            }
        }
        
        // Guardar KPIs en localStorage
        function saveKPIsToStorage() {
            localStorage.setItem('kpiRepository', JSON.stringify(kpiRepository));
        }
        
        // Actualizar la lista de KPIs
        function updateKPIList() {
            const kpiList = document.getElementById('kpiList');
            const emptyRepo = document.getElementById('emptyRepository');
            
            if (kpiRepository.length === 0) {
                emptyRepo.style.display = 'block';
                kpiList.innerHTML = '';
                return;
            }
            
            emptyRepo.style.display = 'none';
            
            // Crear elementos para cada KPI
            kpiList.innerHTML = '';
            kpiRepository.forEach(kpi => {
                const kpiItem = document.createElement('div');
                kpiItem.className = 'kpi-item';
                kpiItem.innerHTML = `
                    <div class="kpi-info">
                        <h3>${kpi.kpiName}</h3>
                        <p><strong>Proceso:</strong> ${formatProcessName(kpi.selectedProcess)}</p>
                        <p><strong>Objetivo:</strong> ${kpi.kpiObjective.substring(0, 100)}...</p>
                        <p><strong>Creado:</strong> ${new Date(kpi.createdAt).toLocaleDateString()}</p>
                    </div>
                    <div class="kpi-actions">
                        <button class="btn-secondary" onclick="viewKPI(${kpi.id})">Ver</button>
                        <button class="btn-warning" onclick="editKPI(${kpi.id})">Editar</button>
                        <button class="btn-danger" onclick="deleteKPI(${kpi.id})">Eliminar</button>
                    </div>
                `;
                kpiList.appendChild(kpiItem);
            });
        }
        
        // Formatear el nombre del proceso para mostrar
        function formatProcessName(processKey) {
            const processNames = {
                'apertura_algodon': 'Apertura Algodón',
                'cardas': 'Cardas',
                'manuares': 'Manuares',
                'mecheras': 'Mecheras',
                'hilatura_anillos': 'Hilatura Anillos',
                'hilatura_openend': 'Hilatura Open-End',
                'urdido': 'Urdido',
                'tenido': 'Teñido',
                'reurdido': 'Reurdido',
                'engomado': 'Engomado',
                'tejeduria': 'Tejeduría',
                'acabado': 'Acabado',
                'revision': 'Revisión',
                'despacho': 'Despacho',
                'servicios': 'Servicios',
                'logistica': 'Logística',
                'calidad': 'Calidad'
                 'innovacion_desarrollo': 'Innovacion_Desarrollo'
                'administracion': 'Administracion'
            
            }; 
            
            return processNames[processKey] || processKey;
        }
        
        // Ver un KPI
        function viewKPI(id) {
            const kpi = kpiRepository.find(k => k.id === id);
            if (kpi) {
                // Crear un modal o ventana para mostrar los detalles
                alert(`Nombre: ${kpi.kpiName}\nProceso: ${formatProcessName(kpi.selectedProcess)}\nDescripción: ${kpi.kpiDescription}`);
            }
        }
        
        // Editar un KPI
        function editKPI(id) {
            const kpi = kpiRepository.find(k => k.id === id);
            if (kpi) {
                // Llenar el formulario con los datos del KPI
                document.getElementById('kpiName').value = kpi.kpiName;
                document.getElementById('kpiDescription').value = kpi.kpiDescription;
                document.getElementById('kpiObjective').value = kpi.kpiObjective;
                
                // Seleccionar el proceso
                selectedProcess = kpi.selectedProcess;
                document.getElementById('selectedProcess').value = selectedProcess;
                document.querySelectorAll('.process-item').forEach(item => {
                    item.classList.remove('selected');
                    if (item.getAttribute('data-process') === selectedProcess) {
                        item.classList.add('selected');
                    }
                });
                
                document.getElementById('variables').value = kpi.variables;
                document.getElementById('measurementUnit').value = kpi.measurementUnit;
                document.getElementById('formula').value = kpi.formula;
                document.getElementById('frequency').value = kpi.frequency;
                document.getElementById('targetValue').value = kpi.targetValue;
                document.getElementById('minValue').value = kpi.minValue;
                document.getElementById('maxValue').value = kpi.maxValue;
                document.getElementById('toleranceRange').value = kpi.toleranceRange;
                
                // Seleccionar opción de SISGO
                if (kpi.sisgoGrafico) {
                    document.querySelector(`input[name="sisgoGrafico"][value="${kpi.sisgoGrafico}"]`).checked = true;
                }
                
                document.getElementById('utilidadComentario').value = kpi.utilidadComentario || '';
                document.getElementById('designResponsible').value = kpi.designResponsible;
                document.getElementById('implementationResponsible').value = kpi.implementationResponsible;
                document.getElementById('monitoringResponsible').value = kpi.monitoringResponsible;
                document.getElementById('emailContact').value = kpi.emailContact || '';
                
                // Eliminar el KPI existente
                deleteKPI(id, false);
                
                // Desplazarse al inicio del formulario
                window.scrollTo(0, 0);
                
                showAlert('Puede editar el KPI y guardar los cambios.', 'success');
            }
        }
        
        // Eliminar un KPI
        function deleteKPI(id, confirm = true) {
            if (confirm && !window.confirm('¿Está seguro de que desea eliminar este KPI?')) {
                return;
            }
            
            kpiRepository = kpiRepository.filter(k => k.id !== id);
            saveKPIsToStorage();
            updateKPIList();
            
            if (confirm) {
                showAlert('KPI eliminado correctamente.', 'success');
            }
        }
        
        // Exportar a PDF
        function exportToPDF() {
            // Esta función requeriría la implementación con jsPDF
            showAlert('Funcionalidad de exportación a PDF en desarrollo.', 'info');
        }
        
        // Exportar a Word
        function exportToWord() {
            showAlert('Funcionalidad de exportación a Word en desarrollo.', 'info');
        }
        
        // Imprimir formulario
        function printForm() {
            window.print();
        }
        
        // Exportar a CSV
        function exportToCSV() {
            showAlert('Funcionalidad de exportación a CSV en desarrollo.', 'info');
        }
        
        // Manejar importación desde CSV
        function handleCSVImport(event) {
            showAlert('Funcionalidad de importación desde CSV en desarrollo.', 'info');
            event.target.value = ''; // Limpiar el input file
        }
        
        // Usar un ejemplo de KPI
        function useExample(exampleNumber) {
            let exampleData = {};
            
            switch(exampleNumber) {
                case 1:
                    exampleData = {
                        kpiName: 'Eficiencia de Producción en Hilatura Open-End',
                        kpiDescription: 'Mide el porcentaje de eficiencia en el proceso de hilatura open-end, considerando la producción real vs. la producción teórica posible.',
                        kpiObjective: 'Maximizar la eficiencia del proceso de hilatura open-end para reducir costos y aumentar la capacidad productiva.',
                        selectedProcess: 'hilatura_openend',
                        variables: 'Producción real, Producción teórica, Tiempo de operación',
                        measurementUnit: 'Porcentaje (%)',
                        formula: '(Producción real / Producción teórica) * 100',
                        frequency: 'diaria',
                        targetValue: '85',
                        minValue: '75',
                        maxValue: '95',
                        toleranceRange: '5',
                        sisgoGrafico: 'si',
                        utilidadComentario: 'Actualmente utilizado y es útil para identificar cuellos de botella en el proceso.',
                        designResponsible: 'Ing. C M.',
                        implementationResponsible: 'Supervisor J. P.',
                        monitoringResponsible: 'Jefe de Producción',
                        emailContact: 'produccion@jeantex_textiles_ejemplo.com'
                    };
                    break;
                    
                case 2:
                    exampleData = {
                        kpiName: 'Índice de Defectos en Tejeduría',
                        kpiDescription: 'Controla la cantidad de defectos por metro cuadrado de tela producida en el área de tejeduría.',
                        kpiObjective: 'Reducir los defectos en la tela producida para mejorar la calidad del producto final y minimizar los rechazos.',
                        selectedProcess: 'tejeduria',
                        variables: 'Defectos encontrados, Metros producidos',
                        measurementUnit: 'Defectos por m²',
                        formula: 'Total defectos / Total metros cuadrados producidos',
                        frequency: 'continua',
                        targetValue: '0.5',
                        minValue: '0',
                        maxValue: '1.2',
                        toleranceRange: '0.2',
                        sisgoGrafico: 'no',
                        utilidadComentario: 'Requiere ser mejorado: necesitamos implementar gráficos de control para seguimiento en tiempo real.',
                        designResponsible: 'Ing. L. R.',
                        implementationResponsible: 'Supervisor Tejeduría',
                        monitoringResponsible: 'Control de Calidad',
                        emailContact: 'calidad@jeantex_ejemplo.com'
                    };
                    break;
                    
                case 3:
                    exampleData = {
                        kpiName: 'Consumo Energético por Kg de Producto',
                        kpiDescription: 'Mide la eficiencia en el consumo de energía por kilogramo de producto terminado en el área de servicios.',
                        kpiObjective: 'Optimizar el consumo energético para reducir costos operativos y minimizar el impacto ambiental.',
                        selectedProcess: 'servicios',
                        variables: 'Energía consumida, Producción total',
                        measurementUnit: 'kWh/kg',
                        formula: 'Total energía consumida / Total kg producidos',
                        frequency: 'mensual',
                        targetValue: '2.8',
                        minValue: '2.5',
                        maxValue: '3.5',
                        toleranceRange: '0.3',
                        sisgoGrafico: 'si',
                        utilidadComentario: 'Muy útil para identificar oportunidades de ahorro energético y establecer metas de sostenibilidad.',
                        designResponsible: 'Ing. R. S.',
                        implementationResponsible: 'Jefe de Servicios',
                        monitoringResponsible: 'Gerencia de Operaciones',
                        emailContact: 'operaciones@jeantex_textil_ejemplo.com'
                    };
                    break;
            }
            
            // Llenar el formulario con los datos del ejemplo
            document.getElementById('kpiName').value = exampleData.kpiName;
            document.getElementById('kpiDescription').value = exampleData.kpiDescription;
            document.getElementById('kpiObjective').value = exampleData.kpiObjective;
            
            // Seleccionar el proceso
            selectedProcess = exampleData.selectedProcess;
            document.getElementById('selectedProcess').value = selectedProcess;
            document.querySelectorAll('.process-item').forEach(item => {
                item.classList.remove('selected');
                if (item.getAttribute('data-process') === selectedProcess) {
                    item.classList.add('selected');
                }
            });
            
            document.getElementById('variables').value = exampleData.variables;
            document.getElementById('measurementUnit').value = exampleData.measurementUnit;
            document.getElementById('formula').value = exampleData.formula;
            document.getElementById('frequency').value = exampleData.frequency;
            document.getElementById('targetValue').value = exampleData.targetValue;
            document.getElementById('minValue').value = exampleData.minValue;
            document.getElementById('maxValue').value = exampleData.maxValue;
            document.getElementById('toleranceRange').value = exampleData.toleranceRange;
            
            // Seleccionar opción de SISGO
            document.querySelector(`input[name="sisgoGrafico"][value="${exampleData.sisgoGrafico}"]`).checked = true;
            
            document.getElementById('utilidadComentario').value = exampleData.utilidadComentario;
            document.getElementById('designResponsible').value = exampleData.designResponsible;
            document.getElementById('implementationResponsible').value = exampleData.implementationResponsible;
            document.getElementById('monitoringResponsible').value = exampleData.monitoringResponsible;
            document.getElementById('emailContact').value = exampleData.emailContact;
            
            // Cambiar a la pestaña de formulario
            showTab('kpi');
            
            showAlert('Ejemplo cargado. Puede editarlo y guardarlo como su propio KPI.', 'success');
        }
        
        // Exportar ejemplo a PDF
        function exportExampleToPDF(exampleNumber) {
            showAlert(`Exportando ejemplo ${exampleNumber} a PDF...`, 'info');
            // Implementación real requeriría jsPDF
        }
    </script>
</body>
</html>


