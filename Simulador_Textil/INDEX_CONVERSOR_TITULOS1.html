<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Títulos de Hilos Textiles</title>
    <style>
        :root {
            --primary-color: #3a6ea5;
            --secondary-color: #f0f8ff;
            --accent-color: #ff6b6b;
            --text-color: #333;
            --light-gray: #f5f5f5;
            --border-color: #ddd;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f9f9f9;
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .description {
            color: #666;
            margin-bottom: 20px;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            background: var(--light-gray);
            border: 1px solid var(--border-color);
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
        }
        
        .tab.active {
            background: white;
            border-bottom: 1px solid white;
            margin-bottom: -1px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .panel {
            display: none;
            padding: 20px;
            border: 1px solid var(--border-color);
            border-radius: 0 0 5px 5px;
            background: white;
        }
        
        .panel.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 16px;
        }
        
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin-top: 10px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2c5282;
        }
        
        .result {
            margin-top: 20px;
            padding: 15px;
            background-color: var(--secondary-color);
            border-left: 4px solid var(--primary-color);
            border-radius: 4px;
        }
        
        .thread-input {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .thread-input select, .thread-input input {
            flex: 1;
        }
        
        .add-thread {
            background-color: var(--accent-color);
            margin-bottom: 15px;
        }
        
        .add-thread:hover {
            background-color: #ff5252;
        }
        
        .remove-thread {
            background-color: #ff9f43;
            padding: 5px 10px;
            font-size: 14px;
        }
        
        .remove-thread:hover {
            background-color: #ff7f17;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            color: #666;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .thread-input {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Simulador de Títulos de Hilos Textiles</h1>
            <p class="description">Convierte entre sistemas de titulación y calcula el título resultante al doblar hilos</p>
        </header>
        
        <div class="tabs">
            <div class="tab active" data-tab="conversion">Conversión de Títulos</div>
            <div class="tab" data-tab="doblaje">Cálculo de Doblaje</div>
        </div>
        
        <div class="panel active" id="conversion-panel">
            <h2>Conversión entre Sistemas de Titulación</h2>
            <div class="form-group">
                <label for="input-value">Valor de entrada:</label>
                <input type="number" id="input-value" step="any" placeholder="Ingrese el valor">
            </div>
            
            <div class="form-group">
                <label for="input-system">Sistema de entrada:</label>
                <select id="input-system">
                    <option value="tex">Tex</option>
                    <option value="denier">Denier</option>
                    <option value="ne">Número inglés (Ne)</option>
                    <option value="nm">Número métrico (Nm)</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="output-system">Sistema de salida:</label>
                <select id="output-system">
                    <option value="tex">Tex</option>
                    <option value="denier">Denier</option>
                    <option value="ne">Número inglés (Ne)</option>
                    <option value="nm">Número métrico (Nm)</option>
                </select>
            </div>
            
            <button id="convert-btn">Convertir</button>
            
            <div class="result" id="conversion-result">
                El resultado aparecerá aquí
            </div>
        </div>
        
        <div class="panel" id="doblaje-panel">
            <h2>Cálculo de Título al Doblar Hilos</h2>
            <p>Seleccione el tipo de hilo y su título para calcular el título resultante al doblarlos:</p>
            
            <div id="threads-container">
                <div class="thread-input">
                    <select class="thread-type">
                        <option value="polyester">Hilo continuo poliéster compactado</option>
                        <option value="cotton">Hilo de algodón</option>
                    </select>
                    <input type="number" class="thread-value" step="any" placeholder="Título">
                    <select class="thread-system">
                        <option value="tex">Tex</option>
                        <option value="denier">Denier</option>
                        <option value="ne">Ne</option>
                        <option value="nm">Nm</option>
                    </select>
                    <button class="remove-thread" style="display: none;">X</button>
                </div>
            </div>
            
            <button class="add-thread" id="add-thread">+ Añadir otro hilo</button>
            
            <div class="form-group">
                <label for="result-system">Sistema para el resultado:</label>
                <select id="result-system">
                    <option value="tex">Tex</option>
                    <option value="denier">Denier</option>
                    <option value="ne">Número inglés (Ne)</option>
                    <option value="nm">Número métrico (Nm)</option>
                </select>
            </div>
            
            <button id="calculate-btn">Calcular título resultante</button>
            
            <div class="result" id="doblaje-result">
                El resultado aparecerá aquí
            </div>
        </div>
        
        <footer>
            <p>Simulador de conversión de títulos textiles - Sistema directo e indirecto</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Manejo de pestañas
            const tabs = document.querySelectorAll('.tab');
            const panels = document.querySelectorAll('.panel');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.getAttribute('data-tab');
                    
                    // Activar pestaña seleccionada
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Mostrar panel correspondiente
                    panels.forEach(panel => {
                        panel.classList.remove('active');
                        if (panel.id === `${tabName}-panel`) {
                            panel.classList.add('active');
                        }
                    });
                });
            });
            
            // Conversión de títulos
            const convertBtn = document.getElementById('convert-btn');
            convertBtn.addEventListener('click', convertTitle);
            
            function convertTitle() {
                const inputValue = parseFloat(document.getElementById('input-value').value);
                const inputSystem = document.getElementById('input-system').value;
                const outputSystem = document.getElementById('output-system').value;
                
                if (isNaN(inputValue) || inputValue <= 0) {
                    document.getElementById('conversion-result').textContent = 'Por favor, ingrese un valor válido mayor que cero.';
                    return;
                }
                
                // Convertir primero a tex como sistema intermedio
                let valueInTex;
                
                switch(inputSystem) {
                    case 'tex':
                        valueInTex = inputValue;
                        break;
                    case 'denier':
                        valueInTex = inputValue / 9;
                        break;
                    case 'ne':
                        valueInTex = 590.5 / inputValue;
                        break;
                    case 'nm':
                        valueInTex = 1000 / inputValue;
                        break;
                }
                
                // Convertir de tex al sistema de salida
                let result;
                
                switch(outputSystem) {
                    case 'tex':
                        result = valueInTex;
                        break;
                    case 'denier':
                        result = valueInTex * 9;
                        break;
                    case 'ne':
                        result = 590.5 / valueInTex;
                        break;
                    case 'nm':
                        result = 1000 / valueInTex;
                        break;
                }
                
                // Formatear resultado
                const systemNames = {
                    'tex': 'tex',
                    'denier': 'denier',
                    'ne': 'Ne',
                    'nm': 'Nm'
                };
                
                document.getElementById('conversion-result').innerHTML = `
                    <strong>Resultado:</strong> ${result.toFixed(4)} ${systemNames[outputSystem]}
                `;
            }
            
            // Cálculo de doblaje
            const addThreadBtn = document.getElementById('add-thread');
            const threadsContainer = document.getElementById('threads-container');
            const calculateBtn = document.getElementById('calculate-btn');
            
            addThreadBtn.addEventListener('click', function() {
                const threadInputs = document.querySelectorAll('.thread-input');
                if (threadInputs.length >= 4) {
                    alert('Máximo 4 hilos permitidos.');
                    return;
                }
                
                const newThread = threadInputs[0].cloneNode(true);
                newThread.querySelector('.thread-value').value = '';
                newThread.querySelector('.remove-thread').style.display = 'block';
                
                newThread.querySelector('.remove-thread').addEventListener('click', function() {
                    if (document.querySelectorAll('.thread-input').length > 1) {
                        this.parentElement.remove();
                    }
                });
                
                threadsContainer.appendChild(newThread);
            });
            
            // Mostrar botón de eliminar si hay más de un hilo
            document.querySelector('.remove-thread').addEventListener('click', function() {
                if (document.querySelectorAll('.thread-input').length > 1) {
                    this.parentElement.remove();
                }
            });
            
            calculateBtn.addEventListener('click', calculateDoubling);
            
            function calculateDoubling() {
                const threadInputs = document.querySelectorAll('.thread-input');
                const resultSystem = document.getElementById('result-system').value;
                
                let totalTex = 0;
                let validInputs = true;
                let errorMessage = '';
                
                threadInputs.forEach((input, index) => {
                    const value = parseFloat(input.querySelector('.thread-value').value);
                    const system = input.querySelector('.thread-system').value;
                    
                    if (isNaN(value) || value <= 0) {
                        validInputs = false;
                        errorMessage = `El hilo ${index + 1} tiene un valor inválido.`;
                        return;
                    }
                    
                    // Convertir a tex
                    let valueInTex;
                    
                    switch(system) {
                        case 'tex':
                            valueInTex = value;
                            break;
                        case 'denier':
                            valueInTex = value / 9;
                            break;
                        case 'ne':
                            valueInTex = 590.5 / value;
                            break;
                        case 'nm':
                            valueInTex = 1000 / value;
                            break;
                    }
                    
                    totalTex += valueInTex;
                });
                
                if (!validInputs) {
                    document.getElementById('doblaje-result').textContent = errorMessage;
                    return;
                }
                
                // El título resultante en el sistema de titulación directa es la suma
                // En sistemas indirectos, es la inversa de la suma
                let result;
                
                switch(resultSystem) {
                    case 'tex':
                        result = totalTex;
                        break;
                    case 'denier':
                        result = totalTex * 9;
                        break;
                    case 'ne':
                        result = 590.5 / totalTex;
                        break;
                    case 'nm':
                        result = 1000 / totalTex;
                        break;
                }
                
                const systemNames = {
                    'tex': 'tex',
                    'denier': 'denier',
                    'ne': 'Ne',
                    'nm': 'Nm'
                };
                
                document.getElementById('doblaje-result').innerHTML = `
                    <strong>Título resultante:</strong> ${result.toFixed(4)} ${systemNames[resultSystem]}
                `;
            }
        });
    </script>
</body>
</html>